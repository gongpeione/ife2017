webpackJsonp([7,14],{120:function(t,i,n){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function s(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t="string"==typeof t?h.g.$(t):t,t.innerHTML=a.default,new d.default(".snake-wrap",{color:{bg:"#232",snake:"#985"}})}Object.defineProperty(i,"__esModule",{value:!0}),i.create=s;var o=n(353),a=e(o),h=n(59);n(342);var r=n(323),d=e(r)},323:function(t,i,n){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}}(),o=n(59),a={empty:0,snake:1,food:2},h={width:600,height:400,blockWidth:20,color:{bg:"#333",snake:"#eee",snakeHead:"#fff",food:"#796"}},r={up:o.CONST.KEY_CODE.UP,right:o.CONST.KEY_CODE.RIGHT,down:o.CONST.KEY_CODE.DOWN,left:o.CONST.KEY_CODE.LEFT},d={},l=[["up","down"],["down","up"],["left","right"],["right","left"]];l.forEach(function(t){d[r[t[0]]]=r[t[1]]});var c={direction:[r.up,r.right,r.down,r.left],control:[]},f=function(){function t(i,n){e(this,t),this.parent="string"==typeof i?o.g.$(i):i,this.option=o.g.merge(h,n),this.map=[],this.snakeBody=[[2,0],[1,0],[0,0]],this.snakeHeadAnchor=0,this.direction=r.right,this.isPlaying=!1,this.speed=1,"canvas"===this.parent.tagName.toLowerCase()?this.canvas=i:(this.canvas=document.createElement("canvas"),this.parent.appendChild(this.canvas),this.canvas.width=this.option.width,this.canvas.height=this.option.height),this.width=this.canvas.width,this.height=this.canvas.height,this.brush=this.canvas.getContext("2d"),this.init()}return s(t,[{key:"init",value:function(){for(var t=this.width/this.option.blockWidth,i=this.height/this.option.blockWidth,n=0;n<i;n++){for(var e=[],s=0;s<t;s++)e.push(a.empty);this.map.push(e)}this.brush.fillStyle="#999",this.brush.fillRect(0,0,this.width,this.height),this.randomFood(),this.mapRender(),this.keydownHandler=this.keydown.bind(this),document.addEventListener("keydown",this.keydownHandler),this.isPlaying=!0,this.startTick()}},{key:"startTick",value:function(){var t=this;setTimeout(function(){t.isPlaying&&(t.snakeMove(),t.startTick())},200*this.speed)}},{key:"keydown",value:function(t){var i=t.keyCode;if(c.direction.indexOf(i)>=0){if(console.log(this.direction,i,d[i]),this.direction===i||this.direction===d[i])return;this.direction=i}}},{key:"randomFood",value:function(){var t=Math.random()*(this.map[0].length-1),i=Math.random()*(this.map.length-1),n=[Math.round(t),Math.round(i)];console.log(n),this.snakeAtPosition(n)?this.randomFood():this.foodPosition=n}},{key:"end",value:function(){this.isPlaying=!1}},{key:"mapRender",value:function(){for(var t=0;t<this.map.length;t++)for(var i=0;i<this.map[t].length;i++){var n,e=[i,t],s=[i*this.option.blockWidth,t*this.option.blockWidth];this.brush.fillStyle=this.option.color.bg,this.snakeAtPosition(e)&&(this.snakeHeadAtPosition(e)?this.brush.fillStyle=this.option.color.snakeHead:this.brush.fillStyle=this.option.color.snake),this.foodAtPosition(e)&&(this.brush.fillStyle=this.option.color.food),(n=this.brush).fillRect.apply(n,s.concat([this.option.blockWidth,this.option.blockWidth]))}}},{key:"snakeAtPosition",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=void 0,e=JSON.stringify(t),s=Object.assign([],this.snakeBody);return i?(s.splice(this.snakeHeadAnchor,1),n=JSON.stringify(s)):n=JSON.stringify(s),n.indexOf(e)>=0}},{key:"snakeHeadAtPosition",value:function(t){var i=JSON.stringify(this.snakeBody[this.snakeHeadAnchor]),n=JSON.stringify(t);return 0===i.indexOf(n)}},{key:"foodAtPosition",value:function(t){var i=JSON.stringify(this.foodPosition),n=JSON.stringify(t);return 0===i.indexOf(n)}},{key:"snakeMove",value:function(){var t=this.snakeHeadAnchor,i=this.snakeBody.length,n=Object.assign([],this.snakeBody[t]);switch(this.direction){case r.right:this.snakeBody[t][0]++;break;case r.left:this.snakeBody[t][0]--;break;case r.up:this.snakeBody[t][1]--;break;case r.down:this.snakeBody[t][1]++}if(this.snakeBody[t][0]>this.map[0].length-1||this.snakeBody[t][0]<0||this.snakeBody[t][1]>this.map.length-1||this.snakeBody[t][1]<0||this.snakeAtPosition(this.snakeBody[t],!0))return console.log("end"),void this.end();for(var e=1;e<i;e++){var s=this.snakeBody[e];this.snakeBody[e]=n,n=s}this.foodAtPosition([this.snakeBody[t][0],this.snakeBody[t][1]])&&(this.snakeBody.push(n),this.randomFood()),this.mapRender()}}]),t}();i.default=f},332:function(t,i,n){i=t.exports=n(317)(),i.push([t.i,".snake{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}",""])},342:function(t,i,n){var e=n(332);"string"==typeof e&&(e=[[t.i,e,""]]);n(318)(e,{});e.locals&&(t.exports=e.locals)},353:function(t,i){t.exports="<div class=snake> <div class=snake-wrap></div> </div>"}});
//# sourceMappingURL=7.index.js.map