webpackJsonp([2,15],{126:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e="string"==typeof e?l.g.$(e):e,e.innerHTML=a.default,new s.default(".markdown .editor",".markdown .out")}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r;var o=n(377),a=i(o),l=n(59);n(362);var u=n(329),s=i(u)},327:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.diffLines=[],this.init()}return o(e,[{key:"init",value:function(){this.markPattern={separator:{regex:/^[\-=\*]{3,}/,template:"<hr>",singleLine:!0,lineStart:!0},emphasis:{regex:/[\*_]([^\*_]+?)[\*_](?!\*)/,template:"<em>$1</em>",singleLine:!1},strongEm:{regex:/[\*_]{2}(.*?)[\*_]{2}/,template:"<strong>$1</strong>",singleLine:!1},strikeThrough:{regex:/~{2}(.*?)~{2}/,template:"<del>$1</del>",singleLine:!1},ul:{regex:/^[\*\-\+]\s([^\n]+)/,template:"<ul>$1</ul>",singleLine:!1,lineStart:!0},ol:{regex:/^\d+\.\s([^\n]+)/,template:"<ol>$1</ol>",singleLine:!1,lineStart:!0},link:{regex:/(?:[^!]|^)\[([^\]]+?)\]\(([^\)]+?)\)/,template:'<a href="$1">$2</a>',singleLine:!1},img:{regex:/!\[([^\]]*?)\]\(([^\)]+?)\)/,template:'<img alt="$1" src="$2">',singleLine:!1},blockquote:{regex:/^\>\s([^\n]+)/,template:"<blockquote>$1</blockquote>",singleLine:!1,lineStart:!0},code:{regex:/`([^`\n]+)`/,template:"<code>$1</code>",singleLine:!1},pre:{regex:/```(\w+)([^`]+?)```/,template:'<pre class="$1">$2</pre>',singleLine:!1}};for(var e=1;e<=6;e++){var t="^s*?"+"#".repeat(e)+"\\s([^\\n]+)";this.markPattern["h"+e]={regex:new RegExp(t),template:"<h"+e+">$1</h"+e+">",singleLine:!1,lineStart:!0}}console.log(this.markPattern)}},{key:"update",value:function(){return this.parse(this.textarea.value)}},{key:"parse",value:function(e){var t=this,n=e.split(/\n{2,}/),i=n.map(function(e){return t.parseLine(e)}),r=i.join("\n");return r}},{key:"parseLine",value:function(e){var t=this,n=!1,i=function(i){var r=t.markPattern[i];if(!r.regex.test(e))return"continue";if(r.singleLine)return e=e.replace(r.regex,r.template),{v:e};if(r.lineStart){if(["blockquote","ol","ul"].indexOf(i)>=0){var o=[],a=e.split("\n");return"ul"===i&&console.log(a),a.forEach(function(e){if("blockquote"===i){var n=e.replace(/>\s/,"");o.push(t.parseLine(n))}else{var r=e.replace(/[\*\-\+]\s|\d+\.\s/,"");o.push("<li>"+r+"</li>")}}),e=r.template.replace("$1",o.join("")),"continue"}r.template.replace("{data}",RegExp.$1);return e=e.replace(new RegExp(r.regex),r.template),n=!0,"continue"}e=e.replace(new RegExp(r.regex,"g"),r.template)};for(var o in this.markPattern){var a=i(o);switch(a){case"continue":continue;default:if("object"===("undefined"==typeof a?"undefined":r(a)))return a.v}}return n?e:"<p>"+e+"</p>"}},{key:"diff",value:function(){}}]),e}();t.default=a},328:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){i(this,e),this.parent="string"==typeof t?document.querySelector(t):t,this.section={lineNums:null,textarea:null},this.callback=n,this.lineCounter=1,this.init()}return r(e,[{key:"init",value:function(){var e=this,t=this.section.lineNums=document.createElement("div"),n=this.section.textarea=document.createElement("div");t.classList.add("line-nums"),n.classList.add("textarea"),n.setAttribute("contenteditable",!0),n.innerHTML="<p>Edit here</p>",this.parent.appendChild(t),this.parent.appendChild(n),this.mutation=new MutationObserver(function(t){var n=e.getContent();e.callback(n.text),e.updateNums(n.nums),console.log(t)}),this.mutation.observe(n,{childList:!0,characterData:!0,subtree:!0}),n.addEventListener("keydown",function(t){e.lineCounter>1||(console.log(n.innerText),1===n.innerText.length&&8===t.keyCode&&t.preventDefault())}),this.addNum(t,1),this.callback(this.getContent().text)}},{key:"updateNums",value:function(e){if(e!==this.lineCounter){if(e>this.lineCounter){for(var t=document.createDocumentFragment(),n=this.lineCounter;n<e;n++,this.lineCounter++)this.addNum(t,n+1);this.section.lineNums.appendChild(t)}if(e<this.lineCounter){console.log(e,this.lineCounter,this.lineCounter-e);for(var i=this.lineCounter-e,r=0;r<i;r++,this.lineCounter--)console.log(this.section.lineNums.lastChild),this.section.lineNums.lastChild.remove()}}}},{key:"addNum",value:function(e,t){var n=document.createElement("p");n.classList.add("line-num"),n.dataset.index=t,n.innerText=t,e.appendChild(n)}},{key:"getContent",value:function(){var e=Array.from(this.section.textarea.querySelectorAll("p")),t=e.reduce(function(e,t){return e+t.innerText+"\n"},"");return{nums:e.length,text:t}}}]),e}();t.default=o},329:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(59),l=n(327),u=i(l),s=n(328),c=i(s),d=function(){function e(t,n){var i=this;r(this,e),this.editor="string"==typeof t?a.g.$(t):t,this.output="string"==typeof n?a.g.$(n):n,this.gmd=new u.default,this.lnote=new c.default(this.editor,function(e){console.log(e),i.update(e)}),this.init()}return o(e,[{key:"init",value:function(){}},{key:"update",value:function(e){this.output.innerHTML=this.gmd.parse(e)}}]),e}();t.default=d},349:function(e,t,n){t=e.exports=n(318)(),t.push([e.i,".markdown{height:100%;overflow:auto;display:flex}.markdown .content{flex:1}.markdown .content textarea{width:100%;height:100%;max-width:100%;max-height:100%;border:none;background:#2a2f31;color:#eee;padding:.1rem;outline:none}.markdown .cover{flex:1;height:100%;overflow:auto}.markdown .out{min-height:100%;overflow:auto;padding:.2rem .3rem;background:#fbf5e5}.markdown .editor{display:flex;flex:1;min-height:100%}.markdown .editor p{margin:0;font-size:.14rem}.markdown .line-nums{min-width:.4rem;background:#30363a;padding:.15rem .1rem;text-align:right;color:#6f8b9c;border-right:1px dashed #535e63}.markdown .textarea{flex:1;background:#30363a;outline:none;padding:.15rem;color:#ddd}",""])},362:function(e,t,n){var i=n(349);"string"==typeof i&&(i=[[e.i,i,""]]);n(319)(i,{});i.locals&&(e.exports=i.locals)},377:function(e,t){e.exports="<div class=markdown> <div class=cover> <div class=editor></div> </div> <div class=cover> <div class=out></div> </div> </div>"}});
//# sourceMappingURL=2.index.js.map