{"version":3,"sources":["webpack:///9.index.js","webpack:///./src/business/snake/index.js","webpack:///./src/business/snake/Snake.js","webpack:///./src/business/snake/style.scss","webpack:///./src/business/snake/style.scss?c71d","webpack:///./src/business/snake/template.html"],"names":["webpackJsonp","120","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","create","parent","arguments","length","undefined","_gtool","g","$","innerHTML","_template2","_Snake2","color","bg","snake","Object","defineProperty","value","_template","_Snake","325","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","POINT_TYPE","empty","food","defaultOption","width","height","blockWidth","snakeHead","DIRECTION","up","CONST","KEY_CODE","UP","right","RIGHT","down","DOWN","left","LEFT","backwardMap","backward","forEach","dirPair","keyCodeList","direction","control","Snake","option","this","merge","map","snakeBody","snakeHeadAnchor","isPlaying","speed","tagName","toLowerCase","canvas","document","createElement","appendChild","brush","getContext","init","blockX","blockY","y","row","x","push","fillStyle","fillRect","randomFood","mapRender","keydownHandler","keydown","bind","addEventListener","startTick","_this","setTimeout","snakeMove","e","keycode","keyCode","indexOf","console","log","Math","random","position","round","snakeAtPosition","foodPosition","_brush","startPoint","snakeHeadAtPosition","foodAtPosition","apply","concat","withoutHead","body","mapPosition","JSON","stringify","tmpBody","assign","splice","head","snakeLength","oldPosition","end","tempPosition","341","354","content","locals","370"],"mappings":"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","file":"9.index.js","sourcesContent":["webpackJsonp([9,15],{\n\n/***/ 120:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.create = create;\n\nvar _template = __webpack_require__(370);\n\nvar _template2 = _interopRequireDefault(_template);\n\nvar _gtool = __webpack_require__(59);\n\n__webpack_require__(354);\n\nvar _Snake = __webpack_require__(325);\n\nvar _Snake2 = _interopRequireDefault(_Snake);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction create(parent) {\n    var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    parent = typeof parent === 'string' ? _gtool.g.$(parent) : parent;\n\n    parent.innerHTML = _template2.default;\n\n    new _Snake2.default('.snake-wrap', {\n        color: {\n            bg: '#232',\n            snake: '#985'\n        }\n    });\n}\n\n/***/ }),\n\n/***/ 325:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _gtool = __webpack_require__(59);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar POINT_TYPE = {\n    empty: 0,\n    snake: 1,\n    food: 2\n};\nvar defaultOption = {\n    width: 600,\n    height: 400,\n    blockWidth: 20,\n    color: {\n        bg: '#333',\n        snake: '#eee',\n        snakeHead: '#fff',\n        food: '#796'\n    }\n};\nvar DIRECTION = {\n    up: _gtool.CONST.KEY_CODE.UP,\n    right: _gtool.CONST.KEY_CODE.RIGHT,\n    down: _gtool.CONST.KEY_CODE.DOWN,\n    left: _gtool.CONST.KEY_CODE.LEFT\n};\n\nvar backwardMap = {};\nvar backward = [['up', 'down'], ['down', 'up'], ['left', 'right'], ['right', 'left']];\nbackward.forEach(function (dirPair) {\n    backwardMap[DIRECTION[dirPair[0]]] = DIRECTION[dirPair[1]];\n});\n\nvar keyCodeList = {\n    direction: [DIRECTION.up, DIRECTION.right, DIRECTION.down, DIRECTION.left],\n    control: []\n};\n\nvar Snake = function () {\n    function Snake(parent, option) {\n        _classCallCheck(this, Snake);\n\n        this.parent = typeof parent === 'string' ? _gtool.g.$(parent) : parent;\n        this.option = _gtool.g.merge(defaultOption, option);\n        this.map = [];\n        this.snakeBody = [[2, 0], [1, 0], [0, 0]];\n        this.snakeHeadAnchor = 0;\n        this.direction = DIRECTION.right;\n        this.isPlaying = false;\n        this.speed = 1;\n\n        if (this.parent.tagName.toLowerCase() === 'canvas') {\n            this.canvas = parent;\n        } else {\n            this.canvas = document.createElement('canvas');\n            this.parent.appendChild(this.canvas);\n\n            this.canvas.width = this.option.width;\n            this.canvas.height = this.option.height;\n        }\n        this.width = this.canvas.width;\n        this.height = this.canvas.height;\n\n        this.brush = this.canvas.getContext('2d');\n\n        this.init();\n    }\n\n    _createClass(Snake, [{\n        key: 'init',\n        value: function init() {\n\n            var blockX = this.width / this.option.blockWidth;\n            var blockY = this.height / this.option.blockWidth;\n\n            for (var y = 0; y < blockY; y++) {\n                var row = [];\n                for (var x = 0; x < blockX; x++) {\n                    row.push(POINT_TYPE.empty);\n                }\n                this.map.push(row);\n            }\n\n            this.brush.fillStyle = '#999';\n            this.brush.fillRect(0, 0, this.width, this.height);\n\n            this.randomFood();\n            this.mapRender();\n\n            this.keydownHandler = this.keydown.bind(this);\n            document.addEventListener('keydown', this.keydownHandler);\n\n            this.isPlaying = true;\n            this.startTick();\n        }\n    }, {\n        key: 'startTick',\n        value: function startTick() {\n            var _this = this;\n\n            setTimeout(function () {\n                if (_this.isPlaying) {\n                    _this.snakeMove();\n                    _this.startTick();\n                }\n            }, 200 * this.speed);\n        }\n    }, {\n        key: 'keydown',\n        value: function keydown(e) {\n            var keycode = e.keyCode;\n            if (keyCodeList.direction.indexOf(keycode) >= 0) {\n                console.log(this.direction, keycode, backwardMap[keycode]);\n                if (this.direction === keycode || this.direction === backwardMap[keycode]) {\n                    return;\n                }\n                this.direction = keycode;\n            }\n        }\n    }, {\n        key: 'randomFood',\n        value: function randomFood() {\n            var x = Math.random() * (this.map[0].length - 1);\n            var y = Math.random() * (this.map.length - 1);\n            var position = [Math.round(x), Math.round(y)];\n            console.log(position);\n            if (this.snakeAtPosition(position)) {\n                this.randomFood();\n            } else {\n                this.foodPosition = position;\n            }\n        }\n    }, {\n        key: 'end',\n        value: function end() {\n            this.isPlaying = false;\n        }\n    }, {\n        key: 'mapRender',\n        value: function mapRender() {\n            for (var y = 0; y < this.map.length; y++) {\n                for (var x = 0; x < this.map[y].length; x++) {\n                    var _brush;\n\n                    var position = [x, y];\n                    var startPoint = [x * this.option.blockWidth, y * this.option.blockWidth];\n\n                    this.brush.fillStyle = this.option.color.bg;\n\n                    if (this.snakeAtPosition(position)) {\n                        if (this.snakeHeadAtPosition(position)) {\n                            this.brush.fillStyle = this.option.color.snakeHead;\n                        } else {\n                            this.brush.fillStyle = this.option.color.snake;\n                        }\n                    }\n\n                    if (this.foodAtPosition(position)) {\n                        this.brush.fillStyle = this.option.color.food;\n                    }\n\n                    (_brush = this.brush).fillRect.apply(_brush, startPoint.concat([this.option.blockWidth, this.option.blockWidth]));\n                }\n            }\n        }\n    }, {\n        key: 'snakeAtPosition',\n        value: function snakeAtPosition(position) {\n            var withoutHead = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            var body = void 0;\n            var mapPosition = JSON.stringify(position);\n            var tmpBody = Object.assign([], this.snakeBody);\n            if (withoutHead) {\n                tmpBody.splice(this.snakeHeadAnchor, 1);\n                body = JSON.stringify(tmpBody);\n            } else {\n                body = JSON.stringify(tmpBody);\n            }\n\n            return body.indexOf(mapPosition) >= 0;\n        }\n    }, {\n        key: 'snakeHeadAtPosition',\n        value: function snakeHeadAtPosition(position) {\n            var head = JSON.stringify(this.snakeBody[this.snakeHeadAnchor]);\n            var mapPosition = JSON.stringify(position);\n            return head.indexOf(mapPosition) === 0;\n        }\n    }, {\n        key: 'foodAtPosition',\n        value: function foodAtPosition(position) {\n            var food = JSON.stringify(this.foodPosition);\n            var mapPosition = JSON.stringify(position);\n            return food.indexOf(mapPosition) === 0;\n        }\n    }, {\n        key: 'snakeMove',\n        value: function snakeMove() {\n            var head = this.snakeHeadAnchor;\n            var snakeLength = this.snakeBody.length;\n            var oldPosition = Object.assign([], this.snakeBody[head]);\n\n            switch (this.direction) {\n                case DIRECTION.right:\n                    this.snakeBody[head][0]++;break;\n                case DIRECTION.left:\n                    this.snakeBody[head][0]--;break;\n                case DIRECTION.up:\n                    this.snakeBody[head][1]--;break;\n                case DIRECTION.down:\n                    this.snakeBody[head][1]++;break;\n            }\n\n            if (this.snakeBody[head][0] > this.map[0].length - 1 || this.snakeBody[head][0] < 0 || this.snakeBody[head][1] > this.map.length - 1 || this.snakeBody[head][1] < 0 || this.snakeAtPosition(this.snakeBody[head], true)) {\n                console.log('end');\n                this.end();\n                return;\n            }\n\n            for (var i = 1; i < snakeLength; i++) {\n                var tempPosition = this.snakeBody[i];\n                this.snakeBody[i] = oldPosition;\n                oldPosition = tempPosition;\n            }\n\n            if (this.foodAtPosition([this.snakeBody[head][0], this.snakeBody[head][1]])) {\n                this.snakeBody.push(oldPosition);\n                this.randomFood();\n            }\n\n            this.mapRender();\n        }\n    }]);\n\n    return Snake;\n}();\n\nexports.default = Snake;\n\n/***/ }),\n\n/***/ 341:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(318)();\n// imports\n\n\n// module\nexports.push([module.i, \".snake{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(341);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(319)(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/sass-loader/index.js!./style.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/sass-loader/index.js!./style.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 370:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=snake> <div class=snake-wrap></div> </div>\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 9.index.js","import template from './template.html';\nimport { g } from '../../gtool';\nimport './style.scss';\nimport Snake from './Snake';\n\nexport function create (parent, option = []) {\n    parent = typeof parent === 'string' ? g.$(parent) : parent;\n\n    parent.innerHTML = template;\n\n    new Snake('.snake-wrap', {\n        color: {\n            bg: '#232',\n            snake: '#985'\n        }\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/business/snake/index.js","import { g, CONST } from '../../gtool';\n\nconst POINT_TYPE = {\n    empty: 0,\n    snake: 1,\n    food: 2\n};\nconst defaultOption = {\n    width: 600,\n    height: 400,\n    blockWidth: 20,\n    color: {\n        bg: '#333',\n        snake: '#eee',\n        snakeHead: '#fff',\n        food: '#796'\n    },\n};\nconst DIRECTION = {\n    up: CONST.KEY_CODE.UP,\n    right: CONST.KEY_CODE.RIGHT,\n    down: CONST.KEY_CODE.DOWN,\n    left: CONST.KEY_CODE.LEFT\n};\n\n// Generate direction backward map\nconst backwardMap = {};\nconst backward = [['up', 'down'], ['down', 'up'], ['left', 'right'], ['right', 'left']];\nbackward.forEach(dirPair => {\n    backwardMap[DIRECTION[dirPair[0]]] = DIRECTION[dirPair[1]];\n});\n\nconst keyCodeList = {\n    direction: [DIRECTION.up, DIRECTION.right, DIRECTION.down, DIRECTION.left],\n    control: []\n}\nexport default class Snake {\n    constructor (parent, option) {\n        this.parent = typeof parent === 'string' ? g.$(parent) : parent;\n        this.option = g.merge(defaultOption, option);\n        this.map = [];\n        this.snakeBody = [[2, 0], [1, 0], [0, 0]];\n        this.snakeHeadAnchor = 0;\n        this.direction = DIRECTION.right;\n        this.isPlaying = false;\n        this.speed = 1;\n\n        // canvas init\n        if (this.parent.tagName.toLowerCase() === 'canvas') {\n            this.canvas = parent;\n        } else {\n            this.canvas = document.createElement('canvas');\n            this.parent.appendChild(this.canvas);\n\n            this.canvas.width = this.option.width;\n            this.canvas.height = this.option.height;\n        }\n        this.width = this.canvas.width;\n        this.height = this.canvas.height;\n        \n        this.brush = this.canvas.getContext('2d');\n\n        this.init();\n    }\n\n    init () {\n\n        const blockX = this.width / this.option.blockWidth;\n        const blockY = this.height / this.option.blockWidth;\n\n        // map init\n        for (let y = 0; y < blockY; y++) {\n            const row = [];\n            for (let x = 0; x < blockX; x++) {\n                row.push(POINT_TYPE.empty);\n            }\n            this.map.push(row);\n        }\n\n        // background under map\n        this.brush.fillStyle = '#999';\n        this.brush.fillRect(0, 0, this.width, this.height);\n\n        this.randomFood();\n        this.mapRender();\n\n        this.keydownHandler = this.keydown.bind(this);\n        document.addEventListener('keydown', this.keydownHandler);\n\n        this.isPlaying = true;\n        this.startTick();\n    }\n\n    startTick () {\n        setTimeout(() => {\n            if (this.isPlaying) {\n                this.snakeMove();\n                this.startTick();\n            }\n        }, 200 * this.speed);\n    }\n\n    keydown (e) {\n        const keycode = e.keyCode;\n        if (keyCodeList.direction.indexOf(keycode) >= 0) {\n            console.log(this.direction, keycode, backwardMap[keycode]);\n            if (this.direction === keycode || this.direction === backwardMap[keycode]) {\n                return\n            }\n            this.direction = keycode;\n        }\n    }\n\n    randomFood () {\n        const x = Math.random() * (this.map[0].length - 1);\n        const y = Math.random() * (this.map.length - 1);\n        const position = [Math.round(x), Math.round(y)];\n        console.log(position);\n        if (this.snakeAtPosition(position)) {\n            this.randomFood();\n        } else {\n            this.foodPosition = position;\n        }\n    }\n\n    end () {\n        this.isPlaying = false;\n        // document.removeEventListener('keydown', this.keydownHandler);\n    }\n\n    mapRender () {\n        // console.log(JSON.stringify(this.map));\n        for (let y = 0; y < this.map.length; y++) {\n            for (let x = 0; x < this.map[y].length; x++) {\n                \n                const position = [x, y];\n                const startPoint = [x * this.option.blockWidth, y * this.option.blockWidth];\n\n                this.brush.fillStyle = this.option.color.bg;\n                // To determine whether the snake's body at this position\n                if (this.snakeAtPosition(position)) {\n                    if (this.snakeHeadAtPosition(position)) {\n                        this.brush.fillStyle = this.option.color.snakeHead;\n                    } else {\n                        this.brush.fillStyle = this.option.color.snake;\n                    }\n                }\n\n                if (this.foodAtPosition(position)) {\n                    this.brush.fillStyle = this.option.color.food;\n                }\n                \n                this.brush.fillRect(\n                    ...startPoint, \n                    this.option.blockWidth, \n                    this.option.blockWidth\n                );\n                // row.push(POINT_TYPE.empty);\n            }\n        }\n    }\n\n    snakeAtPosition (position, withoutHead = false) {\n        let body;\n        const mapPosition = JSON.stringify(position);\n        const tmpBody = Object.assign([], this.snakeBody);\n        if (withoutHead) {\n            tmpBody.splice(this.snakeHeadAnchor, 1)\n            body = JSON.stringify(tmpBody);\n        } else {\n            body = JSON.stringify(tmpBody);\n        }\n        // console.log(body, withoutHead);\n        return body.indexOf(mapPosition) >= 0;\n    }\n    snakeHeadAtPosition (position) {\n        const head = JSON.stringify(this.snakeBody[this.snakeHeadAnchor]);\n        const mapPosition = JSON.stringify(position);\n        return head.indexOf(mapPosition) === 0;\n    }\n    foodAtPosition (position) {\n        const food = JSON.stringify(this.foodPosition);\n        const mapPosition = JSON.stringify(position);\n        return food.indexOf(mapPosition) === 0;\n    }\n\n    snakeMove () {\n        const head = this.snakeHeadAnchor;\n        const snakeLength = this.snakeBody.length;\n        let oldPosition = Object.assign([], this.snakeBody[head]);\n\n        // Update snake's head position\n        switch (this.direction) {\n            case DIRECTION.right: this.snakeBody[head][0]++; break;\n            case DIRECTION.left: this.snakeBody[head][0]--; break;\n            case DIRECTION.up: this.snakeBody[head][1]--; break;\n            case DIRECTION.down: this.snakeBody[head][1]++; break;\n        }\n\n        // crossing the wall or biting itself, game over\n        if (\n            this.snakeBody[head][0] > this.map[0].length - 1 ||\n            this.snakeBody[head][0] < 0 ||\n            this.snakeBody[head][1] > this.map.length - 1 ||\n            this.snakeBody[head][1] < 0 ||\n            this.snakeAtPosition(this.snakeBody[head], true)\n        ) {\n            console.log('end');\n            this.end();\n            return;\n        }\n\n        for (let i = 1; i < snakeLength; i++) {\n            const tempPosition = this.snakeBody[i];\n            this.snakeBody[i] = oldPosition;\n            oldPosition = tempPosition;\n        }\n        \n        // little snake ate the food and the tail grow longer\n        if (this.foodAtPosition([this.snakeBody[head][0], this.snakeBody[head][1]])) {\n            this.snakeBody.push(oldPosition);\n            this.randomFood();\n        }\n        \n        this.mapRender();\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/business/snake/Snake.js","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".snake{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?minimize!./~/sass-loader!./src/business/snake/style.scss\n// module id = 341\n// module chunks = 9","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/sass-loader/index.js!./style.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/sass-loader/index.js!./style.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/sass-loader/index.js!./style.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/business/snake/style.scss\n// module id = 354\n// module chunks = 9","module.exports = \"<div class=snake> <div class=snake-wrap></div> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/business/snake/template.html\n// module id = 370\n// module chunks = 9"],"sourceRoot":""}